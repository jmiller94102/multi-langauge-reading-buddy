import type { Achievement } from '@/types/achievement';

export const ACHIEVEMENTS: Achievement[] = [
  // Reading Achievements
  {
    id: 'first-steps',
    title: 'First Steps',
    description: 'Complete your first reading passage',
    icon: '📖',
    category: 'reading',
    rarity: 'common',
    requirement: 'Read 1 passage',
    targetValue: 1,
    xp: 100,
    coins: 50,
    gems: 0,
    unlocked: true,
    currentProgress: 1,
    unlockedAt: Date.now() - 2 * 24 * 60 * 60 * 1000, // 2 days ago
  },
  {
    id: 'book-worm',
    title: 'Book Worm',
    description: 'Read 10 passages',
    icon: '📚',
    category: 'reading',
    rarity: 'common',
    requirement: 'Read 10 passages',
    targetValue: 10,
    xp: 200,
    coins: 100,
    gems: 0,
    unlocked: true,
    currentProgress: 10,
    unlockedAt: Date.now() - 3 * 24 * 60 * 60 * 1000, // 3 days ago
  },
  {
    id: 'avid-reader',
    title: 'Avid Reader',
    description: 'Read 50 passages',
    icon: '📖✨',
    category: 'reading',
    rarity: 'rare',
    requirement: 'Read 50 passages',
    targetValue: 50,
    xp: 500,
    coins: 250,
    gems: 2,
    unlocked: false,
    currentProgress: 12,
  },
  {
    id: 'master-reader',
    title: 'Master Reader',
    description: 'Read 100 passages',
    icon: '🎓',
    category: 'reading',
    rarity: 'epic',
    requirement: 'Read 100 passages',
    targetValue: 100,
    xp: 1000,
    coins: 500,
    gems: 10,
    unlocked: false,
    currentProgress: 12,
  },

  // Quiz Achievements
  {
    id: 'quiz-novice',
    title: 'Quiz Novice',
    description: 'Complete your first quiz',
    icon: '✏️',
    category: 'quiz',
    rarity: 'common',
    requirement: 'Complete 1 quiz',
    targetValue: 1,
    xp: 100,
    coins: 50,
    gems: 0,
    unlocked: true,
    currentProgress: 1,
    unlockedAt: Date.now() - 2 * 24 * 60 * 60 * 1000,
  },
  {
    id: 'perfect-score',
    title: 'Perfect Score',
    description: 'Get 100% on 5 quizzes',
    icon: '⭐',
    category: 'quiz',
    rarity: 'rare',
    requirement: 'Get 100% on 5 quizzes',
    targetValue: 5,
    xp: 500,
    coins: 200,
    gems: 5,
    unlocked: false,
    currentProgress: 3,
  },
  {
    id: 'quiz-expert',
    title: 'Quiz Expert',
    description: 'Complete 50 quizzes',
    icon: '🏅',
    category: 'quiz',
    rarity: 'epic',
    requirement: 'Complete 50 quizzes',
    targetValue: 50,
    xp: 500,
    coins: 300,
    gems: 5,
    unlocked: false,
    currentProgress: 12,
  },
  {
    id: 'perfect-scholar',
    title: 'Perfect Scholar',
    description: 'Get 100% on 10 quizzes',
    icon: '🎯',
    category: 'quiz',
    rarity: 'epic',
    requirement: 'Get 100% on 10 quizzes',
    targetValue: 10,
    xp: 500,
    coins: 300,
    gems: 5,
    unlocked: false,
    currentProgress: 3,
  },

  // Streak Achievements
  {
    id: 'week-warrior',
    title: 'Week Warrior',
    description: 'Maintain a 7-day streak',
    icon: '🔥',
    category: 'streak',
    rarity: 'rare',
    requirement: 'Maintain a 7-day streak',
    targetValue: 7,
    xp: 200,
    coins: 100,
    gems: 1,
    unlocked: true,
    currentProgress: 7,
    unlockedAt: Date.now() - 1 * 24 * 60 * 60 * 1000, // Yesterday
  },
  {
    id: 'committed',
    title: 'Committed',
    description: 'Maintain a 30-day streak',
    icon: '🔥🔥',
    category: 'streak',
    rarity: 'epic',
    requirement: 'Maintain a 30-day streak',
    targetValue: 30,
    xp: 500,
    coins: 300,
    gems: 5,
    unlocked: false,
    currentProgress: 7,
  },
  {
    id: 'legendary-streak',
    title: 'Legendary',
    description: 'Maintain a 100-day streak',
    icon: '💎🔥',
    category: 'streak',
    rarity: 'legendary',
    requirement: 'Maintain a 100-day streak',
    targetValue: 100,
    xp: 1500,
    coins: 1000,
    gems: 15,
    unlocked: false,
    currentProgress: 7,
  },

  // Language Achievements
  {
    id: 'speed-reader',
    title: 'Speed Reader',
    description: 'Read a level 4+ passage',
    icon: '⚡',
    category: 'language',
    rarity: 'common',
    requirement: 'Complete a level 4+ passage',
    targetValue: 1,
    xp: 200,
    coins: 100,
    gems: 0,
    unlocked: true,
    currentProgress: 1,
    unlockedAt: Date.now() - 3 * 24 * 60 * 60 * 1000,
  },
  {
    id: 'bilingual-beginner',
    title: 'Bilingual Beginner',
    description: 'Complete a level 5+ passage',
    icon: '🌍',
    category: 'language',
    rarity: 'rare',
    requirement: 'Complete a level 5+ passage',
    targetValue: 1,
    xp: 250,
    coins: 150,
    gems: 1,
    unlocked: false,
    currentProgress: 0,
  },
  {
    id: 'language-explorer',
    title: 'Language Explorer',
    description: 'Complete a level 8+ passage',
    icon: '🗺️',
    category: 'language',
    rarity: 'epic',
    requirement: 'Complete a level 8+ passage',
    targetValue: 1,
    xp: 400,
    coins: 200,
    gems: 3,
    unlocked: false,
    currentProgress: 0,
  },
  {
    id: 'korean-scholar',
    title: 'Korean Scholar',
    description: 'Complete 20 Korean passages',
    icon: '🇰🇷',
    category: 'language',
    rarity: 'epic',
    requirement: 'Complete 20 Korean passages',
    targetValue: 20,
    xp: 500,
    coins: 300,
    gems: 5,
    unlocked: false,
    currentProgress: 5,
  },

  // Pet Achievements
  {
    id: 'first-evolution',
    title: 'First Evolution',
    description: 'Evolve your pet for the first time',
    icon: '🦋',
    category: 'pet',
    rarity: 'rare',
    requirement: 'Evolve your pet once',
    targetValue: 1,
    xp: 200,
    coins: 150,
    gems: 2,
    unlocked: false,
    currentProgress: 0,
  },
  {
    id: 'pet-parent',
    title: 'Pet Parent',
    description: 'Keep pet happiness above 80% for 7 days',
    icon: '💝',
    category: 'pet',
    rarity: 'rare',
    requirement: 'Maintain 80%+ happiness for 7 days',
    targetValue: 7,
    xp: 300,
    coins: 200,
    gems: 3,
    unlocked: false,
    currentProgress: 2,
  },
  {
    id: 'food-connoisseur',
    title: 'Food Connoisseur',
    description: 'Try 10 different foods',
    icon: '🍱',
    category: 'pet',
    rarity: 'rare',
    requirement: 'Feed 10 different foods',
    targetValue: 10,
    xp: 250,
    coins: 150,
    gems: 2,
    unlocked: true,
    currentProgress: 10,
    unlockedAt: Date.now() - 4 * 24 * 60 * 60 * 1000,
  },
  {
    id: 'culture-ambassador',
    title: 'Culture Ambassador',
    description: 'Try 3 culture-specific foods',
    icon: '🎌',
    category: 'pet',
    rarity: 'epic',
    requirement: 'Try 3 culture-specific foods',
    targetValue: 3,
    xp: 400,
    coins: 250,
    gems: 3,
    unlocked: false,
    currentProgress: 1,
  },

  // XP/Level Achievements
  {
    id: 'level-5',
    title: 'Level 5',
    description: 'Reach level 5',
    icon: '⬆️',
    category: 'xp',
    rarity: 'common',
    requirement: 'Reach level 5',
    targetValue: 5,
    xp: 200,
    coins: 100,
    gems: 1,
    unlocked: true,
    currentProgress: 5,
    unlockedAt: Date.now() - 5 * 24 * 60 * 60 * 1000,
  },
  {
    id: 'level-10',
    title: 'Level 10',
    description: 'Reach level 10',
    icon: '🎖️',
    category: 'xp',
    rarity: 'rare',
    requirement: 'Reach level 10',
    targetValue: 10,
    xp: 500,
    coins: 300,
    gems: 5,
    unlocked: false,
    currentProgress: 8,
  },
  {
    id: 'rising-star',
    title: 'Rising Star',
    description: 'Earn 5000 total XP',
    icon: '📈',
    category: 'xp',
    rarity: 'epic',
    requirement: 'Earn 5000 total XP',
    targetValue: 5000,
    xp: 1000,
    coins: 500,
    gems: 10,
    unlocked: false,
    currentProgress: 2450,
  },
  {
    id: 'level-20',
    title: 'Level 20',
    description: 'Reach level 20',
    icon: '🏆',
    category: 'xp',
    rarity: 'epic',
    requirement: 'Reach level 20',
    targetValue: 20,
    xp: 1000,
    coins: 600,
    gems: 10,
    unlocked: false,
    currentProgress: 8,
  },

  // Collection Achievements
  {
    id: 'collector',
    title: 'Collector',
    description: 'Unlock 5 achievements',
    icon: '🌟',
    category: 'collection',
    rarity: 'rare',
    requirement: 'Unlock 5 achievements',
    targetValue: 5,
    xp: 250,
    coins: 150,
    gems: 2,
    unlocked: true,
    currentProgress: 8,
    unlockedAt: Date.now() - 2 * 24 * 60 * 60 * 1000,
  },
  {
    id: 'achiever',
    title: 'Achiever',
    description: 'Unlock 10 achievements',
    icon: '💫',
    category: 'collection',
    rarity: 'epic',
    requirement: 'Unlock 10 achievements',
    targetValue: 10,
    xp: 500,
    coins: 300,
    gems: 5,
    unlocked: false,
    currentProgress: 8,
  },
  {
    id: 'completionist',
    title: 'Completionist',
    description: 'Unlock all achievements',
    icon: '👑',
    category: 'collection',
    rarity: 'legendary',
    requirement: 'Unlock all achievements',
    targetValue: 24,
    xp: 2000,
    coins: 1000,
    gems: 50,
    unlocked: false,
    currentProgress: 8,
  },
];

// Helper functions
export function getUnlockedAchievements(): Achievement[] {
  return ACHIEVEMENTS.filter(a => a.unlocked);
}

export function getLockedAchievements(): Achievement[] {
  return ACHIEVEMENTS.filter(a => !a.unlocked);
}

export function getAchievementsByCategory(category: Achievement['category']): Achievement[] {
  return ACHIEVEMENTS.filter(a => a.category === category);
}

export function getAchievementProgress(achievement: Achievement): number {
  if (achievement.unlocked) return 100;
  return Math.min(100, (achievement.currentProgress / achievement.targetValue) * 100);
}

export function getNextAchievement(): Achievement | null {
  // Get locked achievements sorted by closest to completion
  const lockedAchievements = getLockedAchievements();
  if (lockedAchievements.length === 0) return null;

  return lockedAchievements.sort((a, b) => {
    const progressA = getAchievementProgress(a);
    const progressB = getAchievementProgress(b);
    return progressB - progressA; // Highest progress first
  })[0] || null;
}
